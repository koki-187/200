# 未実装タスク一覧 v3.90.0
**作成日**: 2025-12-02  
**現在のプロジェクト完成度**: 9.8 / 10

## プロジェクト概要
**200棟土地仕入れ管理システム** - 不動産土地仕入れ業務の効率化・自動化を目的とした統合管理システム

**最新プロダクションURL**: https://a0217557.real-estate-200units-v2.pages.dev

**GitHubリポジトリ**: https://github.com/koki-187/200

---

## ✅ 完了済みタスク（v3.90.0時点）

### 🏛️ 自治体条例データベース構築（新規実装）
- **実装日**: 2025-12-02
- **カバレッジ**: 1都3県（東京・神奈川・埼玉・千葉）+ 愛知県 + 長野県
- **データ項目**:
  - 紛争予防条例（中高層建築物の建築に係る紛争の予防と調整に関する条例）
  - 駐車場設置基準（自治体別の駐車場附置義務）
  - 3階建て木造集合住宅の構造基準
  - 景観計画区域における届出義務
  - 防火地域・準防火地域の制限
- **対象自治体**:
  - 東京都: 千代田区、渋谷区、新宿区、世田谷区
  - 神奈川県: 横浜市、川崎市、相模原市
  - 埼玉県: さいたま市、幸手市、川口市
  - 千葉県: 千葉市、千葉市美浜区、船橋市、市川市
  - 愛知県: 名古屋市、豊田市
  - 長野県: 長野市、松本市
- **新規APIエンドポイント**:
  - `GET /api/building-regulations/municipal?location={住所}&category={カテゴリ}`
  - `GET /api/building-regulations/three-story-wooden?location={住所}`
- **UI改善**:
  - 建築基準法と自治体条例を統合表示
  - カテゴリ別アイコン（駐車場、3階建て木造、紛争予防、景観、防火）
  - 自治体名バッジ表示
  - 参照URLリンク
- **テスト結果**:
  - 千葉市美浜区: 3件（建築基準法）+ 1件（自治体条例）✅
  - 川崎市幸区: 3件（建築基準法）+ 3件（自治体条例）✅
  - 埼玉県幸手市: 3件（建築基準法）+ 2件（自治体条例）✅
  - 東京都渋谷区: 3件（建築基準法）+ 2件（自治体条例）✅

### 🏗️ 建築基準法チェック機能（v3.74.0～v3.90.0継続改善）
- 3階建て木造建築物の特別規定自動検出
- 建築基準法第21条、第27条、第20条、第35条の該当判定
- 防火地域・準防火地域の制限チェック
- 構造計算要否判定
- 避難規定チェック（共同住宅の場合）
- 容積率・建蔽率確認（緩和措置含む）
- URLエンコーディング対応（日本語パラメータ）
- APIフィールド整合性修正（title vs law_name）
- 全47都道府県駐車場設置基準（v3.89.1で完了）
- 自治体条例データベース統合（v3.90.0で完了）

### 📂 案件管理機能（完全実装）
- 案件CRUD操作（作成、読取、更新、削除）
- ファイルアップロード・管理（PDF、画像、文書）
- バルク操作（一括更新、一括削除、一括割り当て）
- ステータス管理（NEW, REVIEWING, NEGOTIATING, CONTRACTED, REJECTED）
- 拡張フィルター・ソート機能
- CSVエクスポート機能
- 案件一覧ページ無限ローディング修正（v3.89.1～v3.90.0）
- 重複初期化バグ修正（v3.90.0）

### 🤖 OCR自動入力機能（完全実装）
- 画像アップロード（ドラッグ&ドロップ対応）
- OpenAI GPT-4 Vision API統合
- フォーム自動入力
- プレビュー表示
- OCR履歴管理

### 👥 ユーザー管理（完全実装 v3.87.0）
- ユーザーCRUD API（GET/PUT/DELETE /api/users）
- ロールベースアクセス制御（ADMIN, USER）
- 認証・認可機能統合

### 💬 メッセージング機能（完全実装 v3.86.2）
- 案件別メッセージスレッド
- リアルタイム通知
- 既読管理
- タイムスタンプ表示
- 送信者識別

### 🔔 通知機能（完全実装 v3.76.0～v3.86.2）
- LINE Notify統合
- Slack Webhook統合
- 通知タイプ別設定（案件作成/更新、メッセージ、ステータス変更）
- テスト通知機能
- 通知設定UI

### 📊 ダッシュボード（完全実装）
- KPI表示（総案件数、進行中、契約済み、却下）
- 案件ステータス推移グラフ
- リアルタイム分析
- システムメトリクス

### 🏛️ 不動産情報ライブラリAPI連携（完全実装 v3.59.1）
- MLIT（国土交通省）不動産情報ライブラリAPI統合
- さいたま市の市区町村コード対応

### 🎨 事業ショーケース（完全実装）
- 販売エリアマップ（愛知県、長野県、埼玉県）
- 実績物件展示（外観、内装）
- 9戸プラン詳細（外観、内観、設備、間取り図）
- 事業概要説明
- 商品化条件表示

---

## 🔴 未実装タスク（優先度高）

### 1. 自治体条例データベースの拡充
**優先度**: 🔴 高  
**推定工数**: 2～3週間  
**説明**: 現在の1都3県+愛知+長野の18市区町村から、さらに詳細な自治体条例データベースを構築  
**詳細**:
- **市区町村レベルの詳細条例**:
  - 駐車場附置義務の詳細（駅近緩和、用途地域別基準、面積別基準）
  - 建築紛争予防条例の適用範囲・手続き詳細
  - 景観条例の届出要件・審査基準
  - 高度地区の詳細規定（第1種～第4種）
  - 日影規制の詳細（測定面、規制値）
  - まちづくり条例・地区計画の反映
- **対象自治体の拡大**:
  - 東京23区全区
  - 政令指定都市全市（横浜、川崎、さいたま、千葉、相模原、名古屋）
  - 中核市・施行時特例市（船橋、柏、八王子、町田、立川等）
- **データソース**:
  - 各自治体の建築指導課・都市計画課のウェブサイト
  - 条例データベース（例: 法令データ提供システム）
  - 実際の物件調査資料（提供済み4件から抽出）
- **実装方法**:
  - `src/data/municipalRegulations.ts`への追加
  - APIエンドポイントの拡張（詳細検索、カテゴリ別取得）
  - UIの改善（条例詳細表示、PDF参照リンク、手続きフロー）

### 2. 案件一覧ページ無限ローディング問題の根本原因調査
**優先度**: 🔴 高  
**推定工数**: 2～4時間  
**説明**: v3.89.1とv3.90.0で改善を試みたが、一部環境で依然として発生する可能性のある無限ローディング問題の完全解決  
**詳細**:
- **現状の問題点**:
  - 詳細なコンソールログ追加（v3.89.1）
  - 重複初期化バグ修正（v3.90.0）
  - しかし、一部ブラウザ・ネットワーク環境で問題が再現する可能性
- **調査項目**:
  - ブラウザコンソールログの詳細分析
  - localStorageのauth_token確認
  - axios CDNのロード失敗パターン
  - API /api/dealsのレスポンス時間計測
  - ネットワークタイムアウト設定の確認
- **対策案**:
  - axiosのタイムアウト設定追加
  - CDN失敗時のフォールバック実装
  - ローディング状態の視覚的フィードバック改善
  - エラーメッセージの多言語対応

### 3. 3階建て木造集合住宅の構造計算支援機能
**優先度**: 🟡 中  
**推定工数**: 1週間  
**説明**: 3階建て木造集合住宅の構造計算（許容応力度計算）を支援する機能  
**詳細**:
- **計算項目**:
  - 固定荷重・積載荷重の算定
  - 地震力・風圧力の計算
  - 部材断面の応力度検証
  - 基礎の許容支持力確認
- **データ入力**:
  - 建築物の規模（建築面積、延べ面積、階数、高さ）
  - 構造形式（木造在来軸組工法、枠組壁工法）
  - 地盤データ（N値、地盤種別）
  - 積雪荷重（地域別）
- **出力**:
  - 構造計算書（簡易版）
  - 適合判定結果
  - 必要な補強措置の提案
- **参考資料**:
  - 建築基準法施行令第82条～第82条の6
  - 2015年版建築物の構造関係技術基準解説書

---

## 🟡 未実装タスク（優先度中）

### 4. 物件評価AIアシスタント
**優先度**: 🟡 中  
**推定工数**: 1～2週間  
**説明**: 物件の収益性・法的リスクを自動評価するAIアシスタント  
**詳細**:
- **評価項目**:
  - 建築基準法適合性チェック（既存機能の拡張）
  - 収益性分析（賃料相場、利回り計算）
  - 法的リスク評価（違反建築の可能性、再建築不可）
  - 市場性分析（駅距離、周辺施設、人口動態）
- **AI技術**:
  - OpenAI GPT-4 API統合
  - プロンプトエンジニアリング（建築基準法の専門知識）
  - ベクトルデータベース（過去の案件データから学習）
- **UIデザイン**:
  - チャット形式のインタラクション
  - 評価レポートの自動生成（PDF出力）
  - リスクスコアの可視化（0～100点）

### 5. 地図機能の強化
**優先度**: 🟡 中  
**推定工数**: 3～5日  
**説明**: 物件所在地の地図表示と周辺情報の可視化  
**詳細**:
- **地図API統合**:
  - Google Maps API または Mapbox GL JS
  - 物件位置マーカー表示
  - 周辺施設検索（学校、病院、スーパー、駅）
  - 用途地域・防火地域のオーバーレイ表示
- **高度な機能**:
  - ハザードマップ表示（洪水、土砂災害、地震）
  - 都市計画道路の確認
  - 日影図の簡易シミュレーション
  - 前面道路の幅員確認

### 6. ファイル処理の最適化
**優先度**: 🟡 中  
**推定工数**: 2～3日  
**説明**: 大容量ファイルのアップロード・ダウンロード処理の最適化  
**詳細**:
- **現状の課題**:
  - ファイルサイズ制限（現在10MB）
  - アップロード速度の最適化不足
  - プレビュー生成の遅延
- **改善策**:
  - Cloudflare R2 Storageの活用（現在のKVからの移行）
  - チャンク分割アップロード
  - サムネイル自動生成（画像ファイル）
  - プログレスバー表示
  - 圧縮処理（ZIP、画像最適化）

---

## 🟢 未実装タスク（優先度低）

### 7. モバイルアプリ対応（PWA）
**優先度**: 🟢 低  
**推定工数**: 1週間  
**説明**: プログレッシブウェブアプリ（PWA）化によるモバイル体験の向上  
**詳細**:
- Service Worker実装（既にv3.77.0で基礎実装済み）
- アプリマニフェスト最適化
- オフライン対応の強化
- プッシュ通知（案件更新、メッセージ受信）
- ホーム画面追加機能

### 8. 多言語対応（国際化）
**優先度**: 🟢 低  
**推定工数**: 3～5日  
**説明**: 日本語・英語の多言語対応  
**詳細**:
- i18n（react-i18next）実装
- 言語切り替えUI
- エラーメッセージの多言語化
- 日付・数値のロケール対応

### 9. ダークモード機能のさらなる改善
**優先度**: 🟢 低  
**推定工数**: 1～2日  
**説明**: v3.77.0で実装済みのダークモードのブラッシュアップ  
**詳細**:
- カラーパレットの最適化
- コントラスト比の改善（WCAG AAA準拠）
- テーマプレビュー機能
- カスタムテーマ作成機能

---

## 📊 プロジェクト進捗サマリー

### 完了済み機能（スコア 9.8 / 10）
- ✅ 案件管理（CRUD、バルク操作、フィルター、ソート、エクスポート）
- ✅ OCR自動入力（GPT-4 Vision統合、履歴管理）
- ✅ ユーザー管理（ロールベース認証・認可）
- ✅ メッセージング（スレッド管理、リアルタイム通知）
- ✅ 通知機能（LINE Notify、Slack Webhook）
- ✅ ダッシュボード（KPI、グラフ、メトリクス）
- ✅ 不動産情報ライブラリAPI連携（MLIT）
- ✅ 事業ショーケース（実績物件展示）
- ✅ 建築基準法チェック（3階建て木造特別規定、47都道府県駐車場規制）
- ✅ **自治体条例データベース（1都3県+愛知+長野、18市区町村）** 🆕

### 優先度高タスク（3件）
1. 自治体条例データベースの拡充（2～3週間）
2. 案件一覧ページ無限ローディング問題の根本原因調査（2～4時間）
3. 3階建て木造集合住宅の構造計算支援機能（1週間）

### 優先度中タスク（3件）
4. 物件評価AIアシスタント（1～2週間）
5. 地図機能の強化（3～5日）
6. ファイル処理の最適化（2～3日）

### 優先度低タスク（3件）
7. モバイルアプリ対応（PWA）（1週間）
8. 多言語対応（国際化）（3～5日）
9. ダークモード機能のさらなる改善（1～2日）

**推定残工数**: 5～7週間（フルタイム換算）

---

## 🎯 次セッションでの推奨作業順序

### フェーズ1: 高優先度の完成（推定1週間）
1. ✅ **自治体条例データベース構築** - v3.90.0で完了（基礎18市区町村）
2. 🔄 **自治体条例データベースの拡充** - 東京23区全区、政令指定都市追加
3. 🔍 **案件一覧ページ無限ローディング根本原因調査** - ブラウザコンソール分析、localStorage確認

### フェーズ2: 中優先度の実装（推定2～3週間）
4. 🧮 **3階建て木造集合住宅の構造計算支援機能** - 建築基準法適合判定
5. 🤖 **物件評価AIアシスタント** - GPT-4統合、リスク評価
6. 🗺️ **地図機能の強化** - Google Maps API、用途地域オーバーレイ

### フェーズ3: 低優先度の強化（推定1～2週間）
7. 📱 **PWAモバイル対応** - Service Worker最適化
8. 🌐 **多言語対応** - i18n実装
9. 🎨 **ダークモード改善** - カラーパレット最適化

---

## 🔗 関連ドキュメント
- [OPENAI_API_KEY_SETUP.md](./OPENAI_API_KEY_SETUP.md) - OpenAI APIキー設定ガイド
- [README.md](./README.md) - プロジェクト概要・使用方法
- [VERSION.txt](./VERSION.txt) - バージョン履歴
- [GitHub Repository](https://github.com/koki-187/200) - ソースコード管理

---

## 📞 サポート情報
- **Production URL**: https://a0217557.real-estate-200units-v2.pages.dev
- **Admin Email**: navigator-187@docomo.ne.jp
- **GitHub Issues**: https://github.com/koki-187/200/issues

**最終更新日**: 2025-12-02  
**バージョン**: v3.90.0  
**ビルドサイズ**: 989.39KB
