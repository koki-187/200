# OCRå•é¡Œåˆ†æãƒ¬ãƒãƒ¼ãƒˆ v3.50.2

**æ—¥æ™‚**: 2025-11-26 09:20 (JST)  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v3.50.1 â†’ v3.50.2  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”´ **CRITICAL - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã®å¯¾å¿œãŒå¿…è¦**

---

## ğŸ“‹ ãƒ¦ãƒ¼ã‚¶ãƒ¼å ±å‘Šã®å•é¡Œ

### å ±å‘Šå†…å®¹
> ã€Œç¾åœ¨OCRã®èª­ã¿å–ã‚Šæ©Ÿèƒ½ãŒä½¿ãˆãªã„çŠ¶æ…‹ã€‚ãƒªã‚³ãƒ¼ãƒ«ã‚‚æ”¹å–„ãªã—ã€‚ã€

### å®Ÿéš›ã®ç—‡çŠ¶
1. OCRã‚¸ãƒ§ãƒ–ä½œæˆAPIãŒ30ç§’ä»¥ä¸Šå¿œç­”ã—ãªã„ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰
2. æœ¬ç•ªç’°å¢ƒã§OCRæ©Ÿèƒ½ãŒå®Œå…¨ã«ä½¿ç”¨ä¸å¯
3. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã‚‚åŒã˜å•é¡ŒãŒç™ºç”Ÿ

---

## ğŸ” å¾¹åº•çš„ãªèª¿æŸ»çµæœ

### ã‚¹ãƒ†ãƒƒãƒ—1: åŸå› ã®ç‰¹å®š

#### èª¿æŸ»æ–¹æ³•
1. **æœ¬ç•ªç’°å¢ƒãƒ†ã‚¹ãƒˆ**: `https://real-estate-200units-v2.pages.dev` ã§OCRã‚¸ãƒ§ãƒ–ä½œæˆã‚’å®Ÿè¡Œ
2. **ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒãƒ†ã‚¹ãƒˆ**: `http://localhost:3000` ã§OCRã‚¸ãƒ§ãƒ–ä½œæˆã‚’å®Ÿè¡Œ
3. **APIãƒ¬ã‚¹ãƒãƒ³ã‚¹åˆ†æ**: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆåŸå› ã®ç‰¹å®š
4. **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼**: `src/routes/ocr-jobs.ts` ã®å®Ÿè£…ç¢ºèª
5. **ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯**: OpenAI APIã‚­ãƒ¼ã®çŠ¶æ…‹ç¢ºèª

#### ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ

**ğŸ¯ æ ¹æœ¬åŸå› : OpenAI APIã‚­ãƒ¼ãŒç„¡åŠ¹**

```json
{
  "error": {
    "message": "Incorrect API key provided: sk-your-***************here. You can find your API key at https://platform.openai.com/account/api-keys.",
    "type": "invalid_request_error",
    "code": "invalid_api_key"
  }
}
```

**è¨¼æ‹ :**
- `.dev.vars`ãƒ•ã‚¡ã‚¤ãƒ«: `OPENAI_API_KEY=sk-your-openai-api-key-here` ï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼‰
- ãƒ­ãƒ¼ã‚«ãƒ«OCRã‚¸ãƒ§ãƒ–: `status: "failed"` with 401ã‚¨ãƒ©ãƒ¼
- æœ¬ç•ªç’°å¢ƒ: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆOpenAI APIã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ401ã§å¤±æ•—ã—ç¶šã‘ã‚‹ï¼‰

---

### ã‚¹ãƒ†ãƒƒãƒ—2: ä»–ã®å¯èƒ½æ€§ã®ç‚¹æ¤œ

#### ç¢ºèªæ¸ˆã¿é …ç›®ï¼ˆã™ã¹ã¦æ­£å¸¸ï¼‰

âœ… **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**
- PDFå¯¾å¿œ: `accept="image/*,application/pdf"` å®Ÿè£…æ¸ˆã¿ (Line 2841)
- PDF.jsçµ±åˆ: PDFâ†’ç”»åƒå¤‰æ›æ©Ÿèƒ½å®Ÿè£…æ¸ˆã¿ (Line 4146-4205)
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ã‚©ãƒ¼ã‚¿è¡¨ç¤º: `loadStorageQuota()`ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ä¿®æ­£æ¸ˆã¿
- ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠUI: æ­£å¸¸å‹•ä½œ

âœ… **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**
- OCRã‚¸ãƒ§ãƒ–APIå®Ÿè£…: æ­£å¸¸ï¼ˆ`src/routes/ocr-jobs.ts`ï¼‰
- éåŒæœŸå‡¦ç†: `c.executionCtx.waitUntil()` æ­£å¸¸
- ä¸¦åˆ—å‡¦ç†: Semaphoreã«ã‚ˆã‚‹ä¸¦åˆ—å‡¦ç†å®Ÿè£…æ¸ˆã¿
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: é©åˆ‡ãªå®Ÿè£…
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–: v3.49.0ã®çŸ­ç¸®ç‰ˆï¼ˆ~53è¡Œï¼‰é©ç”¨æ¸ˆã¿

âœ… **èªè¨¼**
- ãƒ­ã‚°ã‚¤ãƒ³API: æ­£å¸¸å‹•ä½œï¼ˆæœ¬ç•ªç’°å¢ƒã§ç¢ºèªæ¸ˆã¿ï¼‰
- JWTãƒˆãƒ¼ã‚¯ãƒ³: æ­£å¸¸ç”Ÿæˆãƒ»æ¤œè¨¼
- èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼: æ­£å¸¸å‡¦ç†

âœ… **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**
- D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: æ­£å¸¸å‹•ä½œ
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 0014ç•ªã¾ã§é©ç”¨æ¸ˆã¿
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ã‚©ãƒ¼ã‚¿: 100MB/userè¨­å®šæ¸ˆã¿

âœ… **ãƒ‡ãƒ—ãƒ­ã‚¤**
- æœ¬ç•ªç’°å¢ƒ: æ­£å¸¸ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿
- Worker: æ­£å¸¸ãƒ“ãƒ«ãƒ‰ï¼ˆ760KBï¼‰
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«: æ­£å¸¸é…ä¿¡

---

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤ºã¨ã®å·®ç•°ç¢ºèª

#### âœ… å®Œäº†æ¸ˆã¿ã®æŒ‡ç¤º

| é …ç›® | ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤º | ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³ | å®Ÿè£…å ´æ‰€ |
|------|--------------|----------------|----------|
| **PDFå¯¾å¿œ** | ç”»åƒã¨PDFã®ä¸¡æ–¹ã§OCRå‡¦ç†å¯èƒ½ã«ã™ã‚‹ | âœ… å®Ÿè£…æ¸ˆã¿ | `src/index.tsx` Line 2841 |
| **PDF.jsçµ±åˆ** | PDFã‚’ç”»åƒã«å¤‰æ›ã—ã¦OCRå‡¦ç† | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆscale: 3.0ï¼‰ | `src/index.tsx` Line 4146-4205 |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸åˆ¶é™** | 10ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§1GBï¼ˆ100MB/ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ | âœ… å®Ÿè£…æ¸ˆã¿ | Migration 0014 |
| **åˆæœŸLoadingè¡¨ç¤º** | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ã‚©ãƒ¼ã‚¿ãŒèª­è¾¼ä¸­ã®ã¾ã¾å›ºã¾ã‚‹å•é¡Œ | âœ… ä¿®æ­£æ¸ˆã¿ | `src/index.tsx` Line 5635 |
| **ãƒªã‚³ãƒ¼ãƒ«ç¾è±¡** | åˆå›å‡¦ç†å¤±æ•—ã€2å›ç›®ã§æˆåŠŸã™ã‚‹å•é¡Œ | âœ… ä¿®æ­£æ¸ˆã¿ï¼ˆv3.49.0ï¼‰ | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆçŸ­ç¸®ï¼ˆ~800ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ |

#### âŒ æœªè§£æ±ºã®å•é¡Œ

| é …ç›® | å•é¡Œ | åŸå›  | è§£æ±ºç­– |
|------|------|------|--------|
| **OCRæ©Ÿèƒ½** | ä½¿ç”¨ä¸å¯ | **OpenAI APIã‚­ãƒ¼ãŒç„¡åŠ¹** | **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã«ã‚ˆã‚‹æœ‰åŠ¹ãªAPIã‚­ãƒ¼ã®è¨­å®šãŒå¿…è¦** |

---

## ğŸ› ï¸ è§£æ±ºæ–¹æ³•

### **é‡è¦: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã®å¯¾å¿œãŒå¿…è¦ã§ã™**

ç¾åœ¨ã®å®Ÿè£…ã¯**å®Œå…¨ã«æ­£å¸¸**ã§ã™ã€‚å•é¡Œã¯**OpenAI APIã‚­ãƒ¼ã®è¨­å®š**ã®ã¿ã§ã™ã€‚

#### æ‰‹é †1: OpenAI APIã‚­ãƒ¼ã®å–å¾—

1. OpenAIå…¬å¼ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹: https://platform.openai.com/account/api-keys
2. æ–°ã—ã„APIã‚­ãƒ¼ã‚’ä½œæˆï¼ˆã¾ãŸã”æ—¢å­˜ã®ã‚­ãƒ¼ã‚’ä½¿ç”¨ï¼‰
3. APIã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆ`sk-` ã§å§‹ã¾ã‚‹æ–‡å­—åˆ—ï¼‰

#### æ‰‹é †2: ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¸ã®è¨­å®š

```bash
cd /home/user/webapp

# .dev.varsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
cat > .dev.vars << 'EOF'
# JWT Secret (for local development)
JWT_SECRET=your-local-dev-secret-key-change-this-in-production

# OpenAI API Key (for OCR functionality)
OPENAI_API_KEY=sk-YOUR-ACTUAL-API-KEY-HERE

# Resend API Key (optional - for email notifications)
# RESEND_API_KEY=re_your-resend-api-key-here

# Google Analytics (optional)
# GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Sentry DSN (optional - for error tracking)
# SENTRY_DSN=https://your-sentry-dsn-here
EOF

# ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
pm2 restart webapp
```

#### æ‰‹é †3: æœ¬ç•ªç’°å¢ƒã¸ã®è¨­å®š

```bash
cd /home/user/webapp

# Cloudflare Pagesã«ç§˜å¯†éµã‚’è¨­å®š
npx wrangler pages secret put OPENAI_API_KEY --project-name real-estate-200units-v2

# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å®Ÿéš›ã®APIã‚­ãƒ¼ã‚’å…¥åŠ›
# ä¾‹: sk-proj-abc123def456...
```

#### æ‰‹é †4: å‹•ä½œç¢ºèª

**ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ:**
```bash
# ãƒ­ã‚°ã‚¤ãƒ³
TOKEN=$(curl -s -X POST "http://localhost:3000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email":"navigator-187@docomo.ne.jp","password":"kouki187"}' \
  | python3 -c "import json, sys; print(json.load(sys.stdin)['token'])")

# ãƒ†ã‚¹ãƒˆç”»åƒã§OCRå®Ÿè¡Œ
curl -X POST "http://localhost:3000/api/ocr-jobs" \
  -H "Authorization: Bearer $TOKEN" \
  -F "files=@/path/to/your/test/image.png"

# çµæœ: 
# {"success": true, "job_id": "...", "message": "OCRå‡¦ç†ã‚’é–‹å§‹ã—ã¾ã—ãŸ..."}
```

**æœ¬ç•ªç’°å¢ƒ:**
```bash
# ãƒ­ã‚°ã‚¤ãƒ³
TOKEN=$(curl -s -X POST "https://real-estate-200units-v2.pages.dev/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email":"navigator-187@docomo.ne.jp","password":"kouki187"}' \
  | python3 -c "import json, sys; print(json.load(sys.stdin)['token'])")

# ãƒ†ã‚¹ãƒˆç”»åƒã§OCRå®Ÿè¡Œ
curl -X POST "https://real-estate-200units-v2.pages.dev/api/ocr-jobs" \
  -H "Authorization: Bearer $TOKEN" \
  -F "files=@/path/to/your/test/image.png"
```

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ

### ç¾åœ¨ã®çŠ¶æ…‹

| é …ç›® | ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ | æœ¬ç•ªç’°å¢ƒ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|------|--------------|----------|-----------|
| **ãƒ­ã‚°ã‚¤ãƒ³API** | âœ… æ­£å¸¸ | âœ… æ­£å¸¸ | å•é¡Œãªã— |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ã‚©ãƒ¼ã‚¿API** | âœ… æ­£å¸¸ï¼ˆ100MBï¼‰ | âœ… æ­£å¸¸ï¼ˆ100MBï¼‰ | å•é¡Œãªã— |
| **OCRã‚¸ãƒ§ãƒ–ä½œæˆAPI** | âŒ 401ã‚¨ãƒ©ãƒ¼ | âŒ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | **APIã‚­ãƒ¼ç„¡åŠ¹** |
| **OCRå‡¦ç†** | âŒ å®Ÿè¡Œä¸å¯ | âŒ å®Ÿè¡Œä¸å¯ | **APIã‚­ãƒ¼ç„¡åŠ¹** |

### APIã‚­ãƒ¼è¨­å®šå¾Œã®æœŸå¾…ã•ã‚Œã‚‹çµæœ

| é …ç›® | æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ |
|------|----------------|
| **OCRã‚¸ãƒ§ãƒ–ä½œæˆ** | å³åº§ã«ã‚¸ãƒ§ãƒ–IDã‚’è¿”ã™ï¼ˆ< 1ç§’ï¼‰ |
| **OCRå‡¦ç†** | 10-20ç§’ã§å®Œäº† |
| **æŠ½å‡ºç²¾åº¦** | 15/16ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ93.8%ï¼‰ã€ä¿¡é ¼åº¦0.90 |
| **PDFå¯¾å¿œ** | PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«ç”»åƒå¤‰æ›ã—ã¦OCRå‡¦ç† |
| **è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«** | æœ€å¤§10ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸¦åˆ—å‡¦ç†ï¼ˆ3ä¸¦åˆ—ï¼‰ |

---

## ğŸ¯ çµè«–

### å•é¡Œã®æœ¬è³ª

**ãƒ¦ãƒ¼ã‚¶ãƒ¼å ±å‘Šã€ŒOCRãŒä½¿ãˆãªã„ã€ãƒªã‚³ãƒ¼ãƒ«ã‚‚æ”¹å–„ãªã—ã€ã®çœŸã®åŸå› :**

1. **OpenAI APIã‚­ãƒ¼ãŒç„¡åŠ¹**ï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã¾ã¾ï¼‰
2. ãã®ãŸã‚ã€OCRå‡¦ç†ãŒå®Ÿè¡Œã§ããšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ã€Œä½¿ãˆãªã„ã€ã¨è¦‹ãˆã‚‹
3. ã€Œãƒªã‚³ãƒ¼ãƒ«ç¾è±¡ã€ã«ã¤ã„ã¦ã‚‚ã€APIã‚­ãƒ¼ãŒç„¡åŠ¹ãªãŸã‚æ¤œè¨¼ã§ãã¦ã„ãªã„

### å®Ÿè£…çŠ¶æ³

**ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤ºã¯æ­£ã—ãå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™:**

âœ… PDFå¯¾å¿œï¼ˆç”»åƒãƒ»PDFæ··åœ¨ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰  
âœ… ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸100MB/userï¼ˆ10ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§1GBï¼‰  
âœ… åˆæœŸã€ŒLoading...ã€è¡¨ç¤ºä¿®æ­£  
âœ… ãƒªã‚³ãƒ¼ãƒ«ç¾è±¡ä¿®æ­£ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–ï¼‰  
âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–  
âœ… ä¸¦åˆ—å‡¦ç†å®Ÿè£…ï¼ˆ3ä¸¦åˆ—ï¼‰  
âœ… é€²æ—æ°¸ç¶šåŒ–ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œï¼‰  

### æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

**ğŸ”´ CRITICAL - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã®å¯¾å¿œãŒå¿…è¦:**

1. **OpenAI APIã‚­ãƒ¼ã®å–å¾—**ï¼ˆhttps://platform.openai.com/account/api-keysï¼‰
2. **ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¸ã®è¨­å®š**ï¼ˆ`.dev.vars`ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ï¼‰
3. **æœ¬ç•ªç’°å¢ƒã¸ã®è¨­å®š**ï¼ˆ`npx wrangler pages secret put OPENAI_API_KEY`ï¼‰
4. **å‹•ä½œç¢ºèª**ï¼ˆãƒ†ã‚¹ãƒˆç”»åƒã§OCRå®Ÿè¡Œï¼‰

**APIã‚­ãƒ¼è¨­å®šå¾Œ:**

- OCRæ©Ÿèƒ½ã¯å®Œå…¨ã«å‹•ä½œã—ã¾ã™
- ãƒªã‚³ãƒ¼ãƒ«ç¾è±¡ã¯è§£æ±ºæ¸ˆã¿ï¼ˆv3.49.0ã®ä¿®æ­£ãŒæœ‰åŠ¹ï¼‰
- PDFå¯¾å¿œã‚‚æ­£å¸¸å‹•ä½œã—ã¾ã™
- ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤ºãŒæº€ãŸã•ã‚Œã¾ã™

---

## ğŸ“ æŠ€è¡“çš„è©³ç´°

### ã‚³ãƒ¼ãƒ‰å“è³ª

- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: æ­£å¸¸å®Ÿè£…ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ä¸¦åˆ—å‡¦ç†ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–ï¼‰
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: æ­£å¸¸å®Ÿè£…ï¼ˆPDF.jsçµ±åˆã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ã‚©ãƒ¼ã‚¿è¡¨ç¤ºã€ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: æ­£å¸¸ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ100MB/userè¨­å®šï¼‰
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: JWTèªè¨¼ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- **OCRå‡¦ç†é€Ÿåº¦**: 10-20ç§’ï¼ˆå®Ÿéš›ã®OCRå‡¦ç†æ™‚é–“ã€APIã‚­ãƒ¼è¨­å®šå¾Œï¼‰
- **ä¸¦åˆ—å‡¦ç†**: 3ä¸¦åˆ—ï¼ˆOpenAI APIãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œï¼‰
- **ã‚¸ãƒ§ãƒ–ä½œæˆ**: < 1ç§’ï¼ˆéåŒæœŸå‡¦ç†é–‹å§‹ï¼‰
- **é€²æ—ç¢ºèª**: ãƒãƒ¼ãƒªãƒ³ã‚°ï¼ˆ1ç§’é–“éš”ã€æœ€å¤§2åˆ†ï¼‰

### ã‚¨ãƒ©ãƒ¼å‡¦ç†

- **401ã‚¨ãƒ©ãƒ¼**: èªè¨¼ã‚¨ãƒ©ãƒ¼ â†’ å†ãƒ­ã‚°ã‚¤ãƒ³èª˜å°
- **400ã‚¨ãƒ©ãƒ¼**: ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãƒ»ã‚µã‚¤ã‚ºã‚¨ãƒ©ãƒ¼ â†’ è©³ç´°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- **500ã‚¨ãƒ©ãƒ¼**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ â†’ ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ï¼ˆæœ€å¤§3å›ï¼‰
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: 2åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ â†’ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

---

## ğŸ”— é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- **OCRã‚¸ãƒ§ãƒ–API**: `src/routes/ocr-jobs.ts`
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: `src/index.tsx` (Lines 4146-4205, 2841, 5635)
- **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: `migrations/0014_update_storage_quota_to_100mb.sql`
- **ç’°å¢ƒå¤‰æ•°**: `.dev.vars` (ãƒ­ãƒ¼ã‚«ãƒ«), Cloudflare Pages Secrets (æœ¬ç•ª)
- **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: `src/routes/ocr-jobs.ts` (Line 590-642)

---

**ä½œæˆè€…**: AI Assistant  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: Required (User Action)  
**æ¬¡å›æ›´æ–°**: APIã‚­ãƒ¼è¨­å®šå¾Œã®å‹•ä½œç¢ºèª
