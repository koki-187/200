# âœ… APIè¨­å®šå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

## ğŸ“… å®Œäº†æ—¥æ™‚
2025-11-17 15:43 (JST)

---

## ğŸ‰ ã™ã¹ã¦ã®APIè¨­å®šãŒå®Œäº†ã—ã¾ã—ãŸï¼

### ç’°å¢ƒå¤‰æ•°è¨­å®šçŠ¶æ³

```bash
npx wrangler pages secret list --project-name real-estate-200units-v2
```

**å‡ºåŠ›çµæœ**:
```
The "production" environment of your Pages project "real-estate-200units-v2" has access to the following secrets:
  âœ… JWT_SECRET: Value Encrypted
  âœ… OPENAI_API_KEY: Value Encrypted
  âœ… RESEND_API_KEY: Value Encrypted
  âœ… SENTRY_DSN: Value Encrypted
```

---

## ğŸ“‹ è¨­å®šæ¸ˆã¿APIä¸€è¦§

### 1. JWTèªè¨¼ âœ…
- **ç’°å¢ƒå¤‰æ•°**: `JWT_SECRET`
- **çŠ¶æ…‹**: è¨­å®šæ¸ˆã¿ãƒ»æš—å·åŒ–æ¸ˆã¿
- **ç”¨é€”**: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **è¨­å®šæ—¥**: ä»¥å‰ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³

---

### 2. OpenAI API (OCR) âœ…
- **ç’°å¢ƒå¤‰æ•°**: `OPENAI_API_KEY`
- **APIã‚­ãƒ¼**: `sk-proj-xsXysPR49r6wq4BOhUjC...`
- **çŠ¶æ…‹**: è¨­å®šæ¸ˆã¿ãƒ»æš—å·åŒ–æ¸ˆã¿
- **ç”¨é€”**: ç™»è¨˜ç°¿è¬„æœ¬ã®OCRè§£æ
- **ãƒ¢ãƒ‡ãƒ«**: GPT-4 Vision
- **è¨­å®šæ—¥**: 2025-11-17 (æœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³)

---

### 3. Resend API (ãƒ¡ãƒ¼ãƒ«é€šçŸ¥) âœ…
- **ç’°å¢ƒå¤‰æ•°**: `RESEND_API_KEY`
- **APIã‚­ãƒ¼**: `re_Ns5TSSqs_2Gc1G2ezZP6KPU637JkEDDF8`
- **çŠ¶æ…‹**: è¨­å®šæ¸ˆã¿ãƒ»æš—å·åŒ–æ¸ˆã¿
- **ç”¨é€”**: ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ï¼ˆæ¡ˆä»¶æ›´æ–°ã€ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã€æœŸé™ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰
- **ç„¡æ–™ãƒ—ãƒ©ãƒ³**: æœˆ3,000é€šã€1æ—¥100é€š
- **é€ä¿¡å…ƒ**: `onboarding@resend.dev`
- **è¨­å®šæ—¥**: 2025-11-17 (æœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³)

**ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±**:
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰: https://resend.com/dashboard
- API Keys: https://resend.com/api-keys
- ãƒ¡ãƒ¼ãƒ«å±¥æ­´: https://resend.com/emails

---

### 4. Sentry (ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°) âœ…
- **ç’°å¢ƒå¤‰æ•°**: `SENTRY_DSN`
- **DSN**: `https://a5802cc17af3670f07362a932c099deb0e4510381088309248.ingest.us.sentry.io/4510381141000192`
- **çŠ¶æ…‹**: è¨­å®šæ¸ˆã¿ãƒ»æš—å·åŒ–æ¸ˆã¿
- **ç”¨é€”**: ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
- **ç„¡æ–™ãƒ—ãƒ©ãƒ³**: æœˆ5,000ã‚¨ãƒ©ãƒ¼ã€1ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **Organization**: `real-estate-200-units`
- **Project**: `real-estate-200units`
- **Platform**: Hono (Cloudflare Workers)
- **è¨­å®šæ—¥**: 2025-11-17 (æœ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³)

**ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±**:
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰: https://real-estate-200-units.sentry.io/
- Issues: https://real-estate-200-units.sentry.io/issues/
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š: https://real-estate-200-units.sentry.io/settings/projects/real-estate-200units/

---

## ğŸš€ æœ‰åŠ¹åŒ–ã•ã‚ŒãŸæ©Ÿèƒ½

| æ©Ÿèƒ½ | çŠ¶æ…‹ | èª¬æ˜ |
|-----|------|------|
| JWTèªè¨¼ | âœ… å‹•ä½œä¸­ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† |
| OpenAI OCR | âœ… å‹•ä½œä¸­ | ç™»è¨˜ç°¿è¬„æœ¬ã®è‡ªå‹•è§£æ |
| ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ | âœ… å‹•ä½œä¸­ | æ¡ˆä»¶æ›´æ–°ãƒ»ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ»æœŸé™ã‚¢ãƒ©ãƒ¼ãƒˆ |
| ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° | âœ… å‹•ä½œä¸­ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ»ãƒ‡ãƒãƒƒã‚° |

---

## ğŸ§ª å‹•ä½œç¢ºèªæ–¹æ³•

### 1. OpenAI OCR ã®ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
TOKEN=$(curl -s -X POST https://6940780f.real-estate-200units-v2.pages.dev/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"Admin!2025"}' | jq -r '.token')

# OCRãƒ†ã‚¹ãƒˆï¼ˆç™»è¨˜ç°¿è¬„æœ¬ç”»åƒãŒå¿…è¦ï¼‰
curl -X POST https://6940780f.real-estate-200units-v2.pages.dev/api/ocr/analyze \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"imageUrl":"https://example.com/document.jpg"}'
```

### 2. Resend ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡
curl -X POST https://6940780f.real-estate-200units-v2.pages.dev/api/email/send \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "to": "YOUR_EMAIL@example.com",
    "subject": "Test Email",
    "html": "<h1>Hello from Resend!</h1>"
  }'
```

**ç¢ºèª**:
- ãƒ¡ãƒ¼ãƒ«å—ä¿¡ã‚’ç¢ºèª
- Resendãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§é€ä¿¡å±¥æ­´ç¢ºèª: https://resend.com/emails

### 3. Sentry ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ

```bash
# å­˜åœ¨ã—ãªã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
curl https://6940780f.real-estate-200units-v2.pages.dev/api/test-error-404
```

**ç¢ºèª**:
- Sentryãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª: https://real-estate-200-units.sentry.io/issues/
- ã‚¨ãƒ©ãƒ¼è©³ç´°ï¼ˆã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ï¼‰ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

---

## ğŸ“Š ç„¡æ–™ãƒ—ãƒ©ãƒ³åˆ¶é™

### Resend
- **æœˆé–“åˆ¶é™**: 3,000é€š
- **æ—¥é–“åˆ¶é™**: 100é€š
- **è¶…éæ™‚**: é€ä¿¡å¤±æ•—ï¼ˆç¿Œæ—¥ãƒ»ç¿Œæœˆã«è‡ªå‹•ãƒªã‚»ãƒƒãƒˆï¼‰

### Sentry
- **æœˆé–“åˆ¶é™**: 5,000ã‚¨ãƒ©ãƒ¼
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°**: 1ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **ãƒ‡ãƒ¼ã‚¿ä¿æŒ**: 30æ—¥
- **è¶…éæ™‚**: å¤ã„ã‚¨ãƒ©ãƒ¼ã‹ã‚‰è‡ªå‹•å‰Šé™¤

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

### å®Ÿæ–½æ¸ˆã¿å¯¾ç­–
âœ… ã™ã¹ã¦ã®APIã‚­ãƒ¼ã¯æš—å·åŒ–ã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¨ã—ã¦ä¿å­˜
âœ… ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ç®¡ç†ï¼ˆã‚³ãƒ¼ãƒ‰ã«ç›´æ¥è¨˜è¿°ãªã—ï¼‰
âœ… Cloudflare Pagesã®å®‰å…¨ãªã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†æ©Ÿèƒ½ã‚’ä½¿ç”¨
âœ… GitHubã¸ã®ã‚³ãƒŸãƒƒãƒˆé˜²æ­¢ï¼ˆ.gitignoreã«ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ æ¸ˆã¿ï¼‰

### æ³¨æ„äº‹é …
âš ï¸ APIã‚­ãƒ¼ã‚’GitHubã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã“ã¨
âš ï¸ å…¬é–‹ãƒãƒ£ãƒ³ãƒãƒ«ã‚„ãƒ­ã‚°ã«APIã‚­ãƒ¼ã‚’è²¼ã‚Šä»˜ã‘ãªã„ã“ã¨
âš ï¸ APIã‚­ãƒ¼ãŒæ¼æ´©ã—ãŸå ´åˆã¯å³åº§ã«å†ç”Ÿæˆã™ã‚‹ã“ã¨

---

## ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `/home/user/webapp/RESEND_SENTRY_SETUP_GUIDE.md` - è©³ç´°ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
- `/home/user/webapp/SENTRY_QUICK_SETUP.md` - Sentryè¶…é€Ÿã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
- `/home/user/webapp/HANDOVER_FREE_API_SETUP.md` - å¼•ãç¶™ãæ–‡æ›¸

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **OpenAI API**: https://platform.openai.com/docs/
- **Resend API**: https://resend.com/docs
- **Sentry Docs**: https://docs.sentry.io/
- **Cloudflare Workers**: https://developers.cloudflare.com/workers/

---

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### OpenAI API
- [x] APIã‚­ãƒ¼å–å¾—
- [x] Cloudflare Pagesã«è¨­å®š
- [x] ç’°å¢ƒå¤‰æ•°ç¢ºèª
- [ ] å‹•ä½œãƒ†ã‚¹ãƒˆï¼ˆç™»è¨˜ç°¿è¬„æœ¬ç”»åƒãŒå¿…è¦ï¼‰

### Resend API
- [x] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- [x] APIã‚­ãƒ¼å–å¾—
- [x] Cloudflare Pagesã«è¨­å®š
- [x] ç’°å¢ƒå¤‰æ•°ç¢ºèª
- [ ] ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡

### Sentry
- [x] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆï¼ˆreal-estate-200unitsï¼‰
- [x] DSNå–å¾—
- [x] Cloudflare Pagesã«è¨­å®š
- [x] ç’°å¢ƒå¤‰æ•°ç¢ºèª
- [ ] ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼é€ä¿¡

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ä½œæ¥­

1. **å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ**
   - å„APIã®å‹•ä½œãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½
   - ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª

2. **Google Analytics 4 è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**
   - å®Œå…¨ç„¡æ–™ã®ã‚¢ã‚¯ã‚»ã‚¹è§£æ
   - å„ªå…ˆåº¦: ä½

3. **æœ¬ç•ªé‹ç”¨é–‹å§‹**
   - ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒæœ‰åŠ¹åŒ–æ¸ˆã¿
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒªãƒªãƒ¼ã‚¹æº–å‚™å®Œäº†

4. **ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°**
   - Sentryãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å®šæœŸçš„ã«ã‚¨ãƒ©ãƒ¼ç¢ºèª
   - Resendãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒ¡ãƒ¼ãƒ«é€ä¿¡çŠ¶æ³ç¢ºèª

---

## ğŸ“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ

1. **ç’°å¢ƒå¤‰æ•°ç¢ºèª**:
   ```bash
   npx wrangler pages secret list --project-name real-estate-200units-v2
   ```

2. **APIã‚­ãƒ¼å†è¨­å®š**:
   ```bash
   echo "NEW_API_KEY" | npx wrangler pages secret put VARIABLE_NAME --project-name real-estate-200units-v2
   ```

3. **ãƒ­ã‚°ç¢ºèª**:
   - Cloudflare Pages ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°
   - Sentry ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
   - ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ã‚³ãƒ³ã‚½ãƒ¼ãƒ«

---

## ğŸ‰ å®Œäº†ï¼

**ã™ã¹ã¦ã®APIè¨­å®šãŒå®Œäº†ã—ã¾ã—ãŸï¼**

æœ¬ç•ªç’°å¢ƒURL: https://6940780f.real-estate-200units-v2.pages.dev

**200æˆ¸ä¸å‹•ç”£ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã€æœ¬ç•ªé‹ç”¨å¯èƒ½ãªçŠ¶æ…‹ã§ã™ã€‚** ğŸš€

---

**ä½œæˆæ—¥**: 2025-11-17  
**ä½œæˆè€…**: AI Assistant  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Real Estate 200 Units Management System  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.0.1
